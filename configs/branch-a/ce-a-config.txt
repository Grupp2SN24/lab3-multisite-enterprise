! CE-A - Branch A Customer Edge Router
! Last updated: 2025-12-08
!
hostname CE-A
!
vrf definition MGMT
 rd 65000:10
 address-family ipv4
 exit-address-family
!
vrf definition USER
 rd 65000:30
 address-family ipv4
 exit-address-family
!
interface Loopback0
 ip address 1.1.1.10 255.255.255.255
!
interface GigabitEthernet0/0
 description Link to PE-A
 ip address 192.168.101.1 255.255.255.252
 bfd interval 300 min_rx 300 multiplier 3
 ip flow ingress
 ip flow egress
!
interface GigabitEthernet0/1
 description MGMT VRF
 vrf forwarding MGMT
 ip address 10.0.1.1 255.255.255.0
!
interface GigabitEthernet0/2
 description USER VRF - LAN
 ip address 10.20.1.1 255.255.255.0
 ip flow ingress
 ip flow egress
!
! === NetFlow Configuration ===
ip flow-export version 9
ip flow-export destination 10.10.0.10 2055
ip flow-export source Loopback0
!
! === BGP Security: Prefix-lists ===
ip prefix-list BRANCH-A-OUT seq 10 permit 10.0.1.0/24
ip prefix-list BRANCH-A-OUT seq 20 permit 10.20.1.0/24
ip prefix-list BRANCH-A-OUT seq 1000 deny 0.0.0.0/0 le 32
!
ip prefix-list BRANCH-A-IN seq 10 permit 10.0.0.0/24
ip prefix-list BRANCH-A-IN seq 20 permit 10.0.2.0/24
ip prefix-list BRANCH-A-IN seq 30 permit 10.10.0.0/24
ip prefix-list BRANCH-A-IN seq 40 permit 10.20.0.0/24
ip prefix-list BRANCH-A-IN seq 50 permit 10.20.2.0/24
ip prefix-list BRANCH-A-IN seq 60 permit 2.2.2.0/24 le 32
ip prefix-list BRANCH-A-IN seq 1000 deny 0.0.0.0/0 le 32
!
! === BFD Global ===
bfd slow-timers 2000
!
router bgp 65000
 bgp router-id 1.1.1.10
 bgp log-neighbor-changes
 neighbor 192.168.101.2 remote-as 65001
 neighbor 192.168.101.2 description PE-A
 neighbor 192.168.101.2 fall-over bfd
 !
 address-family ipv4
  network 10.0.1.0 mask 255.255.255.0
  network 10.20.1.0 mask 255.255.255.0
  neighbor 192.168.101.2 activate
  neighbor 192.168.101.2 allowas-in 2
  neighbor 192.168.101.2 prefix-list BRANCH-A-IN in
  neighbor 192.168.101.2 prefix-list BRANCH-A-OUT out
  neighbor 192.168.101.2 maximum-prefix 50 80 warning-only
 exit-address-family
!
ip route 10.0.1.0 255.255.255.0 Null0
ip route 10.20.1.0 255.255.255.0 Null0
!
! === SNMPv3 Configuration ===
snmp-server group LAB3-RO v3 priv read LAB3-VIEW access 99
snmp-server view LAB3-VIEW iso included
snmp-server user snmpuser LAB3-RO v3 auth sha Lab3SNMPauth! priv aes 128 Lab3SNMPpriv!
snmp-server location "Branch A - Grupp2 SN24"
snmp-server contact "admin@grupp2.lab3.local"
!
access-list 99 permit 10.0.0.0 0.0.0.255
access-list 99 permit 10.0.1.0 0.0.0.255
!
end
